(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,r(o.key),o)}}function n(t,e,n){return(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var o=function(){return t=function t(e,r,o,i,u,a,c){var l=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n(this,"_getTemplate",function(){return document.querySelector(l._templateId).content.querySelector(".element").cloneNode(!0)}),n(this,"createCard",function(){return l._element=l._getTemplate(),l._deleteButton=l._element.querySelector(".element__delete-button"),l._likeButton=l._element.querySelector(".element__like-button"),l._likeElement=l._element.querySelector(".element__like-counter"),l._cardData={data:l._data,counterLikes:l._likeElement},l._likeElement.textContent=l._likes.length,l._cardImage=l._element.querySelector(".element__photo"),l._setEvantListeners(),l._isLiked(),l._cardImage.src=l._image,l._cardImage.alt=l._title,l._element.querySelector(".element__title").textContent=l._title,l._checkIsOwnerCard()||(l._deleteButton.remove(),l._deleteButton=null),l._element}),n(this,"_setEvantListeners",function(){l._deleteButton.addEventListener("click",function(){l._handleCardDelete({data:l._data,element:l._element})}),l._likeButton.addEventListener("click",function(t){t.target.classList.contains("element__like-button_active")?l._handleLikeDelete(l._cardData,t):l._handleLikeSet(l._cardData,t)}),l._cardImage.addEventListener("click",function(){var t={title:l._title,image:l._image};l._handleCardClick(t)})}),this._data=e,this._title=e.name,this._image=e.link,this._likes=e.likes,this._templateId=r,this._handleCardClick=o,this._handleLikeSet=i,this._handleLikeDelete=u,this._handleCardDelete=a,this._UserId=c},(r=[{key:"_isLiked",value:function(){var t=this;this._likes.forEach(function(e){e._id===t._UserId&&t._likeButton.classList.add("element__like-button_active")})}},{key:"_checkIsOwnerCard",value:function(){return this._UserId==this._data.owner._id||null==this._UserId}}])&&e(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,r}();function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,c(r.key),r)}}function a(t,e,n){return(e=c(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var l=function(){return t=function t(e,n){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,"_hideInputError",function(t){var e=r._form.querySelector("#".concat(t.id,"-error"));t.classList.remove(r._config.inputErrorClass),e.classList.remove(r._config.errorClass),e.textContent=""}),a(this,"_showInputError",function(t){var e=r._form.querySelector("#".concat(t.id,"-error"));t.classList.add(r._config.inputErrorClass),e.textContent=t.validationMessage,e.classList.add(r._config.errorClass)}),a(this,"_checkInputValidity",function(t){t.validity.valid?r._hideInputError(t):r._showInputError(t)}),a(this,"_setEventListeners",function(){r._inputList.forEach(function(t){t.addEventListener("input",function(){r._checkInputValidity(t),r._toggleButtonState()})})}),this._config=e,this._form=n,this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._submitButton=this._form.querySelector(this._config.submitButtonSelector)},(e=[{key:"_toggleButtonState",value:function(){var t=this._form.checkValidity();this._submitButton.classList.toggle(this._config.inactiveButtonClass,!t),this._submitButton.disabled=!t}},{key:"resetValidation",value:function(){var t=this;this._toggleButtonState(),this._inputList.forEach(function(e){t._hideInputError(e)})}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",function(t){t.preventDefault()}),this._setEventListeners()}}])&&u(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,p(r.key),r)}}function p(t){var e=function(t){if("object"!=s(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==s(e)?e:e+""}var y=function(){return t=function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._profileName=document.querySelector(n),this._profileJob=document.querySelector(r),this._profileAvatar=document.querySelector(o)},(e=[{key:"getUserInfo",value:function(){return{name:this._profileName.textContent,about:this._profileJob.textContent}}},{key:"setUserInfo",value:function(t){this._profileName.textContent=t.name,this._profileJob.textContent=t.about,this._profileAvatar.style.backgroundImage="url(".concat(t.avatar,")")}}])&&f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function b(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function m(t,e,n){return e&&b(t.prototype,e),n&&b(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function v(t,e,n){return(e=h(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=function(t){if("object"!=d(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==d(e)?e:e+""}var _=m(function t(e,n){var r=this,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),v(this,"renderCards",function(t){t.cards.forEach(function(e){var n={card:e,userId:t.userId,insertMethod:t.insertMethod};r._renderer(n)})}),v(this,"addItem",function(t,e){"append"==e?r._container.append(t):r._container.prepend(t)}),this._renderer=o,this._container=document.querySelector(n)});function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,w(r.key),r)}}function w(t){var e=function(t){if("object"!=g(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=g(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==g(e)?e:e+""}var k=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popup=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)},(e=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"setEventListeners",value:function(){var t=this;this._popup.addEventListener("click",function(e){(e.target.classList.contains("popup_opened")||e.target.classList.contains("popup__close-button_general"))&&t.close()})}}])&&S(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t){if("object"!=E(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==E(e)?e:e+""}function P(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(P=function(){return!!t})()}function C(t,e,n,r){var o=L(I(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=I(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},L.apply(null,arguments)}function I(t){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},I(t)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}var q=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=I(e),function(t,e){if(e&&("object"==E(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,P()?Reflect.construct(e,n||[],I(t).constructor):e.apply(t,n))}(this,e,[t]))._callbackSubmit=n,r._inputList=Array.from(r._popup.querySelectorAll(".popup__input")),r._formValues={},r._sumbitButton=r._popup.querySelector(".popup__save-button"),r._popupForm=r._popup.querySelector(".popup__form"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(e,t),n=e,(r=[{key:"_getInputValues",value:function(){var t=this;return this._inputList.forEach(function(e){return t._formValues[e.name]=e.value}),this._formValues}},{key:"setEventListeners",value:function(){var t=this;C(e,"setEventListeners",this,3)([]),this._popup.addEventListener("submit",function(){t._callbackSubmit(t._getInputValues(),t._sumbitButton)})}},{key:"close",value:function(){C(e,"close",this,3)([]),this._popupForm.reset()}}])&&j(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(k);function x(t){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x(t)}function B(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function A(t){var e=function(t){if("object"!=x(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==x(e)?e:e+""}function U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(U=function(){return!!t})()}function R(){return R="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=D(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},R.apply(null,arguments)}function D(t){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},D(t)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}var H=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=D(e),function(t,e){if(e&&("object"==x(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,U()?Reflect.construct(e,n||[],D(t).constructor):e.apply(t,n))}(this,e,[t]))._popupPicture=document.querySelector(".popup__photo"),n._popupText=document.querySelector(".popup__photo-name"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(e,t),n=e,r=[{key:"open",value:function(t){var n,r,o,i=t.title,u=t.image;(n=e,r=this,"function"==typeof(o=R(D(1&3?n.prototype:n),"open",r))?function(t){return o.apply(r,t)}:o)([]),this._popupPicture.src=u,this._popupPicture.alt=i,this._popupText.textContent=i}}],r&&B(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(k);function N(t){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N(t)}function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,M(r.key),r)}}function M(t){var e=function(t){if("object"!=N(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==N(e)?e:e+""}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(F=function(){return!!t})()}function G(t,e,n,r){var o=z($(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function z(){return z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=$(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},z.apply(null,arguments)}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}function K(t,e){return K=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},K(t,e)}var Q=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=$(e),function(t,e){if(e&&("object"==N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(e,n||[],$(t).constructor):e.apply(t,n))}(this,e,[t]))._form=r._popup.querySelector(".popup__form"),r._callbackSubmit=n,r._submitEventHandler=r._submitEventHandler.bind(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K(t,e)}(e,t),n=e,(r=[{key:"setEventListeners",value:function(){G(e,"setEventListeners",this,3)([])}},{key:"_submitEventHandler",value:function(t){t.preventDefault(),this._callbackSubmit(this._data)}},{key:"open",value:function(t){G(e,"open",this,3)([]),this._form.addEventListener("submit",this._submitEventHandler),this._data=t}},{key:"close",value:function(){G(e,"close",this,3)([]),this._form.removeEventListener("submit",this._submitEventHandler)}}])&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(k);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function X(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Y(r.key),r)}}function Y(t){var e=function(t){if("object"!=W(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}var Z=function(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))},tt=function(){return t=function t(e){var n=e.baseUrl,r=e.headers;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._url=n,this._headers=r},(e=[{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then(Z)}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:this._headers}).then(Z)}},{key:"renderUserAndCards",value:function(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}},{key:"setUserInfo",value:function(t){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t.name,about:t.about})}).then(Z)}},{key:"addCard",value:function(t){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t.name,link:t.link})}).then(Z)}},{key:"setUserAvatar",value:function(t){return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t.avatar})}).then(Z)}},{key:"setLike",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t._id,"/likes"),{method:"PUT",headers:this._headers}).then(Z)}},{key:"deleteLike",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t._id,"/likes"),{method:"DELETE",headers:this._headers}).then(Z)}},{key:"deleteCard",value:function(t){return fetch("".concat(this._url,"/cards/").concat(t._id),{method:"DELETE",headers:this._headers}).then(Z)}}])&&X(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),et=document.querySelector("#profile__edit-button"),nt=document.querySelector("#popup-edit__form"),rt=nt.querySelector("#name"),ot=nt.querySelector("#about"),it=document.querySelector("#popup-create-card"),ut=document.querySelector(".profile__add-button"),at=it.querySelector("#popup-create-card__form"),ct=document.querySelector(".profile__avatar"),lt=document.querySelector("#popup-avatar__form"),st=document.querySelector("#popup-delete-card__save-button");function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}var pt=new tt({baseUrl:"https://mesto.nomoreparties.co/v1/apf-cohort-202",headers:{authorization:"eb71d7d3-76e0-4fcc-b713-f0c9ad1551c9","Content-Type":"application/json"}});pt.renderUserAndCards().then(function(t){var e,n,r=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,u,a=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(l)throw o}}return a}}(e,n)||function(t,e){if(t){if("string"==typeof t)return ft(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ft(t,e):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],i=r[1];kt.setUserInfo({name:o.name,about:o.about,avatar:o.avatar}),bt.renderCards({cards:i,userId:o._id,insertMethod:"append"})}).catch(function(t){return console.log(t)});var yt=new H("#popup-picture");yt.setEventListeners();var dt=function(t){return yt.open(t)},bt=new _({renderer:function(t){bt.addItem(_t(t.card,t.userId),t.insertMethod)}},".elements__list"),mt=new Q("#popup-delete-card",function(t){st.textContent="Удаление...",pt.deleteCard(t.data).then(function(){t.element.remove(),t.element=null,mt.close()}).catch(function(t){return console.log(t)}).finally(function(){return st.textContent="Да"})});mt.setEventListeners();var vt=new q("#popup-create-card",function(t,e){e.textContent="Создание...",pt.addCard(t).then(function(t){bt.addItem(_t(t)),vt.close()}).catch(function(t){return console.log(t)}).finally(function(){e.textContent="Создать"})});vt.setEventListeners();var ht=new q("#popup-avatar",function(t,e){e.textContent="Сохранить...",pt.setUserAvatar(t).then(function(t){ct.style.backgroundImage="url(".concat(t.avatar,")"),ht.close()}).catch(function(t){return console.log(t)}).finally(function(){e.textContent="Сохранить"})});ht.setEventListeners();var _t=function(t,e){return new o(t,"#cardTemplate",dt,St,wt,gt,e).createCard()},gt=function(t){return mt.open(t)},St=function(t,e){pt.setLike(t.data).then(function(n){t.counterLikes.textContent=n.likes.length,e.target.classList.add("element__like-button_active")}).catch(function(t){return console.log(t)})},wt=function(t,e){pt.deleteLike(t.data).then(function(n){t.counterLikes.textContent=n.likes.length,e.target.classList.remove("element__like-button_active")}).catch(function(t){return console.log(t)})},kt=new y({nameSelector:".profile__name",jobSelector:".profile__job",avatarSelector:".profile__avatar"}),Et=new q("#popup-edit",function(t,e){e.textContent="Сохранение...",pt.setUserInfo(t).then(function(t){kt.setUserInfo(t)}).then(function(){return Et.close()}).catch(function(t){return console.log(t)}).finally(function(){return e.textContent="Сохранить"})});Et.setEventListeners();var jt,Ot={};jt={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_disabled",inputErrorClass:"popup__input_has-error",errorClass:"popup__error_opened"},Array.from(document.querySelectorAll(jt.formSelector)).forEach(function(t){var e=new l(jt,t),n=t.getAttribute("name");Ot[n]=e,e.enableValidation()}),ut.addEventListener("click",function(){vt.open(),Ot[at.getAttribute("name")].resetValidation()}),et.addEventListener("click",function(){var t=kt.getUserInfo();rt.value=t.name,ot.value=t.about,Ot[nt.getAttribute("name")].resetValidation(),Et.open()}),ct.addEventListener("click",function(){Ot[lt.getAttribute("name")].resetValidation(),ht.open()})})();
//# sourceMappingURL=main.js.map